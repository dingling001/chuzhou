webpackJsonp([0],{"/+1V":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("mvHQ"),s=r.n(i),a={name:"orderIndex",data:function(){var t=/^1\d{10}$/,e=function(t){"x"==t.slice(17,18)&&(t=t.replace("x","X"));var e="",r=!0;if((t=t.toString())&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(t))if({11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "}[t.substr(0,2)]){if(18==t.length){t=t.split("");for(var i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],s=[1,0,"X",9,8,7,6,5,4,3,2],a=0,n=0;n<17;n++)a+=t[n]*i[n];s[a%11]!=t[17]&&(e="校验位错误",r=!1)}}else e="地址编码错误",r=!1;else e="身份证号格式错误",r=!1;var o={status:r,msg:e};return o};return{value1:"",pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()}},submit:{ordertype:1,traveldate:"",people_quantity:"",contactname:"",contactmobile:"",idcardno:"",child_quantity:0},submitrules:{traveldate:[{required:!0,message:"请选择预约日期",trigger:"blur"}],people_quantity:[{required:!0,validator:function(t,e,r){if(!e)return r(new Error("预约数量不能为空"));setTimeout(function(){e>3||e<=0?r(new Error("最多预约3张，至少预约1张")):r()},100)},trigger:"blur"}],contactname:[{required:!0,message:"请输入姓名",trigger:"blur"}],idcardno:[{required:!0,validator:function(t,r,i){return r?e(r).status?void i():i(new Error(e(r).msg)):i(new Error("身份证号不能为空"))},trigger:"blur"}],contactmobile:[{required:!0,validator:function(e,r,i){if(!r)return i(new Error("手机号不能为空"));setTimeout(function(){t.test(r)?i():i(new Error("手机号不正确"))},300)},trigger:"blur"}]}}},created:function(){localStorage.removeItem("submit"),this._GetOrderDate()},methods:{_GetOrderDate:function(){this.$api.GetOrderDate().then(function(t){})},peopelchange:function(t){console.log(t),t>3&&(this.$message({message:"最多预约3张",type:"error"}),this.submit.people_quantity=3)},appoint:function(){var t=this;this.$refs.submitform.validate(function(e){if(!e)return t.$message({message:"请检查预约信息",type:"error"}),!1;t.$api.POrder(t.submit.traveldate,t.submit.people_quantity,t.submit.contactname,t.submit.contactmobile,t.submit.idcardno,t.submit.child_quantity,t.submit.ordertype).then(function(e){1==e.status?(t.$message({message:"预约成功",type:"success"}),t.submit.order_qrcode=e.data.ResponseBody.order_qrcode,localStorage.setItem("submit",s()(t.submit)),t.$router.push({path:"/orderSuccess",query:{isteam:0}})):t.$message({message:e.msg,type:"error"})})})}}},n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"yybox"},[r("div",{staticClass:"yytitle"},[t._v("预约须知")]),t._v(" "),t._m(0),t._v(" "),r("el-form",{ref:"submitform",staticClass:"formbox",attrs:{rules:t.submitrules,model:t.submit,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"请选择预约日期：",prop:"traveldate"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:"请选择预约日期"},model:{value:t.submit.traveldate,callback:function(e){t.$set(t.submit,"traveldate",e)},expression:"submit.traveldate"}}),t._v(" "),r("span",{staticClass:"require_text"},[t._v("（必填）")])],1),t._v(" "),r("el-form-item",{attrs:{label:"请填写预约张数：",prop:"people_quantity"}},[r("el-input",{attrs:{type:"number",placeholder:"请填写预约张数"},on:{input:t.peopelchange},model:{value:t.submit.people_quantity,callback:function(e){t.$set(t.submit,"people_quantity","string"==typeof e?e.trim():e)},expression:"submit.people_quantity"}}),t._v(" "),r("span",{staticClass:"require_text"},[t._v("（必填）")])],1),t._v(" "),r("el-form-item",{attrs:{label:"姓名：",prop:"contactname"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:t.submit.contactname,callback:function(e){t.$set(t.submit,"contactname","string"==typeof e?e.trim():e)},expression:"submit.contactname"}}),t._v(" "),r("span",{staticClass:"require_text"},[t._v("（必填）")])],1),t._v(" "),r("el-form-item",{attrs:{label:"身份证号：",prop:"idcardno"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入身份证号"},model:{value:t.submit.idcardno,callback:function(e){t.$set(t.submit,"idcardno","string"==typeof e?e.trim():e)},expression:"submit.idcardno"}}),t._v(" "),r("span",{staticClass:"require_text"},[t._v("（必填）")])],1),t._v(" "),r("el-form-item",{attrs:{label:"手机号：",prop:"contactmobile"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入手机号"},model:{value:t.submit.contactmobile,callback:function(e){t.$set(t.submit,"contactmobile","string"==typeof e?e.trim():e)},expression:"submit.contactmobile"}}),t._v(" "),r("span",{staticClass:"require_text"},[t._v("（必填）")])],1),t._v(" "),r("el-form-item",{staticClass:"child",attrs:{label:"随行儿童：",prop:"child_quantity"}},[r("el-input-number",{attrs:{min:0,max:2,label:"随行儿童"},model:{value:t.submit.child_quantity,callback:function(e){t.$set(t.submit,"child_quantity",e)},expression:"submit.child_quantity"}}),t._v(" "),r("span",{staticClass:"require_text"},[t._v("最多可随行两名儿童")])],1),t._v(" "),r("el-form-item",{staticClass:"btnbox"},[r("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.appoint}},[t._v("预约")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"yyxuzhi"},[e("p",[this._v("观众朋友们您好，欢迎参观滁州博物馆")]),this._v(" "),e("p",[this._v("我馆的开放时间为每周二至周日9:00—17:00（16:00停止发票，16:30停止入馆），每周一（国家法定节假日除外）及农历除夕、正月初一、正月初二闭馆。")]),this._v(" "),e("p",[this._v("本馆遇有重大活动或重要设备设施维修保养时，可根据需要临时闭馆，届时将告示公众。我馆为观众提供网上预约服务，请至少提前一天进行门票预约。每张有效身份证件每天限定预约一次，最多可预约3张门票。")]),this._v(" "),e("p",[this._v("预约成功后，凭有效证件或取票二维码在滁州博物馆自动取票机处取票入馆参观。若未在预约日期到馆，视为无效，谢谢合作")])])}]};var o=r("VU/8")(a,n,!1,function(t){r("Rvzd")},"data-v-f7102dee",null);e.default=o.exports},Rvzd:function(t,e){},mvHQ:function(t,e,r){t.exports={default:r("qkKv"),__esModule:!0}},qkKv:function(t,e,r){var i=r("FeBl"),s=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}}});
//# sourceMappingURL=0.c1137a751ac33a76662e.js.map